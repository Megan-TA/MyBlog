<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>huangchen的个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="huangchen的个人博客">
<meta property="og:url" content="https://megan-ta.github.io/index.html">
<meta property="og:site_name" content="huangchen的个人博客">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="huangchen">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/MyBlog/atom.xml" title="huangchen的个人博客" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/MyBlog/favicon.png">
  
  
  
<link rel="stylesheet" href="/MyBlog/css/style.css">

  
    
<link rel="stylesheet" href="/MyBlog/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/MyBlog/" id="logo">huangchen的个人博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/MyBlog/">Home</a>
        
          <a class="main-nav-link" href="/MyBlog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/MyBlog/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://megan-ta.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-centos下通过docker安装文档共享平台mm-wiki" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/MyBlog/2024/03/25/centos%E4%B8%8B%E9%80%9A%E8%BF%87docker%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3%E5%85%B1%E4%BA%AB%E5%B9%B3%E5%8F%B0mm-wiki/" class="article-date">
  <time class="dt-published" datetime="2024-03-25T06:43:38.000Z" itemprop="datePublished">2024-03-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/MyBlog/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/MyBlog/2024/03/25/centos%E4%B8%8B%E9%80%9A%E8%BF%87docker%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3%E5%85%B1%E4%BA%AB%E5%B9%B3%E5%8F%B0mm-wiki/">centos下通过docker安装文档共享平台mm-wiki</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>通过docker容器化的方式部署，此镜像基于centos7和mysql5.7，mm-wiki的版本为v0.2.1。</p>
<h2 id="一、准备工作"><a href="#一、准备工作" class="headerlink" title="一、准备工作"></a>一、准备工作</h2><ol>
<li><p>安装docker</p>
</li>
<li><p>拉取所需镜像</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker pull centos:7</span><br><span class="line"></span><br><span class="line">docker pull mysql:5.7</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>创建所需目录</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /home/mm-wiki/&#123;mmwiki/&#123;build_images,data&#125;,mysql/&#123;sql,data&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>目录说明：</p>
<p>&#x2F;home&#x2F;mm-wiki&#x2F;</p>
<p>├── mmwiki ## mm-wiki相关目录<br>│   ├── build_images  #构建mm-wiki镜像的目录<br>│   └── data   #存放运行mm-wiki镜像后容器的数据目录，用户持久化<br>└── mysql #myql相关目录<br>    ├── data #存放运行mysql镜像后容器的数据目录，用户持久化<br>    └── sql  #存放运行mysql镜像后容器的初始化sql文件</p>
<ol start="4">
<li>下载mm-wiki安装包</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/phachon/mm-wiki/releases/download/v0.2.1/mm-wiki-v0.2.1-linux-amd64.tar.gz -o /home/mm-wiki/mmwiki/build_images/mm-wiki-v0.2.1-linux-amd64.tar.gz</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="二、运行mysql镜像生成容器"><a href="#二、运行mysql镜像生成容器" class="headerlink" title="二、运行mysql镜像生成容器"></a>二、运行mysql镜像生成容器</h2><ol>
<li>编写初始化sql文件和运行镜像生成容器</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; /home/mm-wiki/mysql/sql/init.sql  #路径和参考链接有变化</span><br><span class="line">SET NAMES utf8mb4;</span><br><span class="line">SET FOREIGN_KEY_CHECKS = 0;</span><br><span class="line">CREATE DATABASE mmwiki;</span><br><span class="line">CREATE USER &#x27;mmwiki&#x27;@&#x27;%&#x27; IDENTIFIED BY &quot;mmwiki@123&quot;;</span><br><span class="line">GRANT ALL ON mmwiki.* TO &#x27;mmwiki&#x27;@&#x27;%&#x27; IDENTIFIED BY &quot;mmwiki@123&quot;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>运行镜像生成容器的命令</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --name mysql -h mysql -p 33306:3306 -v  /home/mm-wiki/mysql/sql:/docker-entrypoint-initdb.d/ -v  /home/mm-wiki/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7 </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>命令行登陆测试</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -ummwiki -p -h 10.230.77.18 -P 33306  #回车输入密码再次回车即可，密码是上面的mmwiki@123</span><br></pre></td></tr></table></figure>
<p>说明<br>“-ummwiki”是指定了MySQL用户名为”mmwiki”</p>
<p>-p表示需要输入密码</p>
<p>-h后跟主机IP地址（需要替换成对应服务器地址）</p>
<p>-P后跟端口号</p>
<h2 id="运行mm-wiki镜像生成容器"><a href="#运行mm-wiki镜像生成容器" class="headerlink" title="运行mm-wiki镜像生成容器"></a>运行mm-wiki镜像生成容器</h2><ol>
<li>构建mm-wi镜像</li>
</ol>
<blockquote>
<p>编写dockerfile文件</p>
</blockquote>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; /home/mm-wiki/mmwiki/build_images/dockerfile</span><br><span class="line"><span class="comment">#基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> centos:<span class="number">7</span></span><br><span class="line"><span class="comment">#指定维护者信息</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> huangchen hc1132107224@<span class="number">163</span>.com</span><br><span class="line"><span class="comment">#安装基础工具，可跳过</span></span><br><span class="line"><span class="comment">#RUN yum -y install wget vim telnet</span></span><br><span class="line"><span class="comment">#创建所需目录,分别是安装目录和数据目录</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /opt/mmwiki/&#123;mm-wiki,data&#125;</span></span><br><span class="line"><span class="comment">#下载安装包，网速慢的话可以跳过</span></span><br><span class="line"><span class="comment">#RUN wget https://github.com/phachon/mm-wiki/releases/download/v0.2.1/mm-wiki-v0.2.1-linux-amd64.tar.gz -o /opt/mm_wiki/mm-wiki.tar.gz</span></span><br><span class="line"><span class="comment">#将本地的安装包上传到容器中</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> mm-wiki-v0.2.1-linux-amd64.tar.gz /opt/mmwiki/mm-wiki</span></span><br><span class="line"><span class="comment">#设置主目录</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /opt/mmwiki/mm-wiki</span></span><br><span class="line"><span class="comment">#后台启动,用ENTRYPOINT代替</span></span><br><span class="line"><span class="comment">#CMD ./install/install</span></span><br><span class="line"><span class="comment">#拷贝启动脚本文件</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> docker-entrypoint.sh /usr/bin/docker-entrypoint.sh</span></span><br><span class="line"><span class="comment">#赋予脚本启动权限</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash">  <span class="built_in">chmod</span> +x /usr/bin/docker-entrypoint.sh</span></span><br><span class="line"><span class="comment">#暴露启动端口,如果没有--port参数，默认为8090；如果有启动--port参数，必须和docker-entrypoint.sh启动脚本中的--port参数的端口一致</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8090</span> <span class="number">8080</span></span><br><span class="line"><span class="comment">#挂起进程，便于下次容器启动时可以运行</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;docker-entrypoint.sh&quot;</span>] </span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<blockquote>
<p>编写docker-entrypoint启动脚本（目的是在容器运行时后台进程挂起）</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; /home/mm-wiki/mmwiki/build_images/docker-entrypoint.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">if [ -d /opt/mmwiki/mm-wiki ]; then  #判断容器内的安装目录释放存在</span><br><span class="line">  cd /opt/mmwiki/mm-wiki</span><br><span class="line">else</span><br><span class="line">  echo &quot;/opt/mmwiki/mm-wiki not found&quot;</span><br><span class="line">  return 51</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ -f ./install.lock ]; then  #判断容器内./install.lock是否存在，不存在则是install，否则为正常启动状态       </span><br><span class="line">  ./mm-wiki --conf ./conf/mm-wiki.conf</span><br><span class="line">else</span><br><span class="line">  cd install &amp;&amp; ./install  #如果需要指定端口，后面加--port=8087即可</span><br><span class="line">fi</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<blockquote>
<p>构建镜像</p>
</blockquote>
<p>在 &#x2F;home&#x2F;mm-wiki&#x2F;mmwiki&#x2F;build_images&#x2F; 目录下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t mm-wiki:v0.2.1 .</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>运行mm-wiki镜像</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --name mm-wiki -h wiki --link mysql:db -p 8090:8090 -p 8080:8080 -v /home/mm-wiki/mmwiki/data:/opt/mmwiki/data mm-wiki:v0.2.1</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="浏览器引导安装"><a href="#浏览器引导安装" class="headerlink" title="浏览器引导安装"></a>浏览器引导安装</h2><ol>
<li><p>浏览器输入安装地址   <a target="_blank" rel="noopener" href="http://10.230.77.18:8090/">http://10.230.77.18:8090/</a></p>
</li>
<li><p>界面配置</p>
</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pF4hjH0"><img src="https://s21.ax1x.com/2024/03/25/pF4hjH0.png" alt="系统配置"></a><br><a target="_blank" rel="noopener" href="https://imgse.com/i/pF4hrtO"><img src="https://s21.ax1x.com/2024/03/25/pF4hrtO.png" alt="数据库配置"></a><br><a target="_blank" rel="noopener" href="https://imgse.com/i/pF4h076"><img src="https://s21.ax1x.com/2024/03/25/pF4h076.png" alt="安装成功"></a></p>
<ol start="3">
<li>界面访问登录</li>
</ol>
<blockquote>
<p>重启mm-wiki容器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker restart mm-wiki</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看运行日志</span></span><br><span class="line">docker logs -f mm-wiki</span><br></pre></td></tr></table></figure>

<blockquote>
<p>界面登录访问</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="http://10.230.77.18:8080/">http://10.230.77.18:8080/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://megan-ta.github.io/2024/03/25/centos%E4%B8%8B%E9%80%9A%E8%BF%87docker%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3%E5%85%B1%E4%BA%AB%E5%B9%B3%E5%8F%B0mm-wiki/" data-id="clu6rtt8j000na8xabvqsazcr" data-title="centos下通过docker安装文档共享平台mm-wiki" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/MyBlog/tags/linux/" rel="tag">linux</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-gitlab-runner搭建CICD平台" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/MyBlog/2024/02/21/gitlab-runner%E6%90%AD%E5%BB%BACICD%E5%B9%B3%E5%8F%B0/" class="article-date">
  <time class="dt-published" datetime="2024-02-21T03:13:01.000Z" itemprop="datePublished">2024-02-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/MyBlog/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/MyBlog/2024/02/21/gitlab-runner%E6%90%AD%E5%BB%BACICD%E5%B9%B3%E5%8F%B0/">gitlab-runner搭建CI/CD平台</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="项目架构图"><a href="#项目架构图" class="headerlink" title="项目架构图"></a>项目架构图</h2><p><img src="/MyBlog/img/article/gitlab-runner/devflow.png" alt="devflow"></p>
<h2 id="研发流程"><a href="#研发流程" class="headerlink" title="研发流程"></a>研发流程</h2><ol>
<li>Maintainer从master拉取本次迭代上线分支，命名规则以当前年度+发布日期，比如release&#x2F;20240606；</li>
<li>各个Developer从release&#x2F;20240606拉取各自开发分支，命名规则以feat&#x2F;个人姓名拼音首字母&#x2F;发布日期，比如feat&#x2F;a&#x2F;20240606，feat&#x2F;b&#x2F;20240606</li>
<li>开发完成，各自合并到fat-deploy分支，自动触发CI&#x2F;CD流程，发布到fat环境；</li>
<li>测试完成，需要走上线流程，将各自开发分支合并到原先拉取的发布分支release&#x2F;20240606，自动触发uat发布，验证通过后，走pre发布，最后走pro发布；代码自动合并到master。</li>
<li>若发现上线有问题，依次执行git回滚和部署代码回滚。</li>
</ol>
<p>Maintainer关注：每次迭代拉取release发布分支，review上线的MR代码；<br>Developer关注：当前发布分支，本地fat测试以及MR走上线流程；</p>
<h2 id="CI-CD功能"><a href="#CI-CD功能" class="headerlink" title="CI&#x2F;CD功能"></a>CI&#x2F;CD功能</h2><ol>
<li>MR到指定分支后，支持自动触发构建应用；</li>
<li>并发构建应用；</li>
<li>PRO发布成功后，自动合并发布分支到master分支；</li>
<li>PRO发布成功后，直接一键git代码回滚，一键服务端部署回滚；</li>
<li>支持不同环境发布，fat、uat、pre、pro；</li>
<li>CI&#x2F;CD部署脚本和项目隔离，可复用；</li>
</ol>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><h3 id="gitlab-runner执行shell的nodejs版本和linux服务器的nodejs版本不一致"><a href="#gitlab-runner执行shell的nodejs版本和linux服务器的nodejs版本不一致" class="headerlink" title="gitlab-runner执行shell的nodejs版本和linux服务器的nodejs版本不一致"></a>gitlab-runner执行shell的nodejs版本和linux服务器的nodejs版本不一致</h3><p>gitlab-runner的nodejs版本要使用yum的方式安装，不能使用nvm、本地下载后创建bin形式，这种方式默认不会给gitlab-runner给安装nodejs，yum是可以的</p>
<p>参考资料：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/nodesource/distributions">nodesource</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903938106327048">centos7 之 yum 安装nodejs</a></p>
<h3 id="gitlab-runner拉取的分支merge到master分支一直不成功"><a href="#gitlab-runner拉取的分支merge到master分支一直不成功" class="headerlink" title="gitlab-runner拉取的分支merge到master分支一直不成功"></a>gitlab-runner拉取的分支merge到master分支一直不成功</h3><p>gitlab默认拉取的是一个HEAD分支，HEAD分支是无法进行合并的，此时需要手动在本地拉取一个当前CommitID对应的分支，再进行merge操作；</p>
<h3 id="初始化在清理git时一直不成功，提示Permission-denied或其他权限相关报错（block最久的问题）"><a href="#初始化在清理git时一直不成功，提示Permission-denied或其他权限相关报错（block最久的问题）" class="headerlink" title="初始化在清理git时一直不成功，提示Permission denied或其他权限相关报错（block最久的问题）"></a>初始化在清理git时一直不成功，提示Permission denied或其他权限相关报错（block最久的问题）</h3><p><img src="/MyBlog/img/article/gitlab-runner/git-failed-write.png" alt=".git权限不足1"><br><img src="/MyBlog/img/article/gitlab-runner/git-permisson-denied.png" alt=".git权限不足2"><br><img src="/MyBlog/img/article/gitlab-runner/dist-permission.png" alt=".git权限不足3"></p>
<p>出现这个问题，主要是因为在进行git merge，git revet，或者打包生成的新目录如dist时，操作的用户（比如 root）不是gitlab-runner这个用户，导致下次在初始化时重置当前项目时，一直提示权限不足</p>
<p>解决办法：在每次执行完任务时，重新给当前目录设置下可写等权限。需要注意处理下，job异常退出时未及时设置权限，导致下次构建又遇到权限异常的问题。</p>
<p><img src="/MyBlog/img/article/gitlab-runner/chmod.png" alt="chmod"></p>
<p><img src="/MyBlog/img/article/gitlab-runner/shell-catch.png" alt="shell-catch"></p>
<h3 id="git-merge时提示没有权限推送到master分支"><a href="#git-merge时提示没有权限推送到master分支" class="headerlink" title="git merge时提示没有权限推送到master分支"></a>git merge时提示没有权限推送到master分支</h3><p><img src="/MyBlog/img/article/gitlab-runner/403.png" alt="push 403"></p>
<p>默认gitlab-ci-token来拉取的，本身权限是比较低的，基本只有read权限，push时可通过https:&#x2F;&#x2F;用户名:用户密码@xxxx.git HEAD:master的方式来推送即可</p>
<p><img src="/MyBlog/img/article/gitlab-runner/push.png" alt="push"></p>
<p>参考资料：</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/46472250/cannot-push-from-gitlab-ci-yml">Cannot push from gitlab-ci.yml</a></p>
<h3 id="同一个stage下，无法同时构建应用"><a href="#同一个stage下，无法同时构建应用" class="headerlink" title="同一个stage下，无法同时构建应用"></a>同一个stage下，无法同时构建应用</h3><p><img src="/MyBlog/img/article/gitlab-runner/build-1.png" alt="build-1"><br><img src="/MyBlog/img/article/gitlab-runner/build-2.png" alt="build-2"><br><img src="/MyBlog/img/article/gitlab-runner/build-3.png" alt="build-3"><br><img src="/MyBlog/img/article/gitlab-runner/stage-1.png" alt="stage-1"><br><img src="/MyBlog/img/article/gitlab-runner/stage-2.png" alt="stage-2"></p>
<p>这是因为gitlab-runner在同时并发构建job时，为了保证应用相互隔离和资源竞争等考虑，会在builds不同临时目录下去构建应用。此时若将拉取git代码和安装依赖单独放在一个stage下，build在单独一个stage下，则默认只会在一个目录下拉取git和安装依赖，在并发时，另一个目录不会重复此步骤，就会出现代码不一致，本地没安装依赖等情况。需要调整将两个stage合并为一个stage。</p>
<p><img src="/MyBlog/img/article/gitlab-runner/stage-3.png" alt="stage-3"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://megan-ta.github.io/2024/02/21/gitlab-runner%E6%90%AD%E5%BB%BACICD%E5%B9%B3%E5%8F%B0/" data-id="clu6rtt8n000ta8xa7a8abq97" data-title="gitlab-runner搭建CI/CD平台" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/MyBlog/tags/CI-CD/" rel="tag">CI&#x2F;CD</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-小程序带二维码分享图注意点" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/MyBlog/2021/01/21/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%B8%A6%E4%BA%8C%E7%BB%B4%E7%A0%81%E5%88%86%E4%BA%AB%E5%9B%BE%E6%B3%A8%E6%84%8F%E7%82%B9/" class="article-date">
  <time class="dt-published" datetime="2021-01-21T09:00:40.000Z" itemprop="datePublished">2021-01-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/MyBlog/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/MyBlog/2021/01/21/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%B8%A6%E4%BA%8C%E7%BB%B4%E7%A0%81%E5%88%86%E4%BA%AB%E5%9B%BE%E6%B3%A8%E6%84%8F%E7%82%B9/">小程序带二维码分享图注意点</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><p>目前小程序都是在<code>Taro</code>基础上开发</p>
<h2 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h2><h3 id="获取节点"><a href="#获取节点" class="headerlink" title="获取节点"></a>获取节点</h3><p>目前taro上获取canvas节点，有两种方法</p>
<ol>
<li>type + id；</li>
<li>canvas-id；</li>
</ol>
<p>两者不能共存</p>
<p>当使用type时，可以通过<code>createSelectorQuery</code>方法获取canvas节点获取支持 2D 和 WebGL 绘图上下文的RenderingContext</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Taro</span>.<span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> query = <span class="title class_">Taro</span>.<span class="title function_">createSelectorQuery</span>()</span><br><span class="line">  query.<span class="title function_">select</span>(<span class="string">&#x27;#aniLoading&#x27;</span>).<span class="title function_">fields</span>(&#123; <span class="attr">node</span>: <span class="literal">true</span>, <span class="attr">size</span>: <span class="literal">true</span>, <span class="attr">context</span>: <span class="literal">true</span> &#125;).<span class="title function_">exec</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!res || !res[<span class="number">0</span>]) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">const</span> canvas = res[<span class="number">0</span>].<span class="property">node</span>;</span><br><span class="line">    <span class="keyword">const</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);  </span><br><span class="line">  &#125;) </span><br><span class="line">&#125;)    </span><br></pre></td></tr></table></figure>
<p>canvas-id方式可通过Taro.createCanvasContext(canvasId)获取canvas上下文的CanvasContext</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ctx = <span class="title class_">Taro</span>.<span class="title function_">createCanvasContext</span>(canvasId)</span><br></pre></td></tr></table></figure>

<p>由于小程序本身的特性，无法动态创建canvas节点，必须在节点结构提前创建canvas节点</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Canvas</span></span><br><span class="line">   canvasId=<span class="string">&#x27;canvas&#x27;</span></span><br><span class="line">   style=<span class="string">&#x27;width:750px;height:1448px;&#x27;</span></span><br><span class="line">   className=<span class="string">&#x27;fortune_canvas&#x27;</span></span><br><span class="line">/&gt; </span><br></pre></td></tr></table></figure>

<h2 id="踩坑点"><a href="#踩坑点" class="headerlink" title="踩坑点"></a>踩坑点</h2><ol>
<li>同一页面不能存在相同的canvas-id；</li>
<li><span style="color: red;">canvas元素在Ios真机设备滚动页面下无法上滑；</span></li>
</ol>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/yMg1gJ"><img src="https://s3.ax1x.com/2021/02/03/yMg1gJ.md.png" alt="yMg1gJ.md.png"></a></p>
<h4 id="drawImage和base64"><a href="#drawImage和base64" class="headerlink" title="drawImage和base64"></a>drawImage和base64</h4><p>canvas内drawImage绘制图片，需要先通过<code>getImageInfo</code>或<code>downloadFile</code>，将网络图片存到本地之后拿到图片path、宽高等信息来进行绘制</p>
<p>无法直接绘制base64的图，因为base64不是网络地址，就无法通过getImageInfo和downloadFile获取图片信息，可参考官方issue提出的相关问题和解决方案尝试</p>
<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/community/develop/article/doc/00008c13228078898f2b0bcf751413">小程序生产海报的两种常见方式链接</a></p>
<h3 id="层级"><a href="#层级" class="headerlink" title="层级"></a>层级</h3><p>canvas组件层级默认会比普通的view层级高，所以一般无法在canvas组件上再放置其他元素，但如果使用cover-view组件包裹canvas组件，是可以设置层级。</p>
<h3 id="二维码"><a href="#二维码" class="headerlink" title="二维码"></a>二维码</h3><p>目前采用的是<a target="_blank" rel="noopener" href="https://github.com/dillonlfy/weapp-qrcod">weapp-qrcode</a>来绘制小程序上的二维码，本身也是基于qrcodejs（目前大多数H5上二维码绘制的基础库），测试下来在小程序还是会有一些问题</p>
<p>保存canvas绘制图片时，安卓机器上二维码会比较糊，ios正常，导致wx没法识别，但是在页面绘制的二维码没有此问题</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/yMgnEV"><img src="https://s3.ax1x.com/2021/02/03/yMgnEV.png" alt="yMgnEV.png"></a></p>
<p>目前调试下来，只有在需要绘制保存的图片的二维码时，加上<code>typeNumber</code>来进行调节二维码绘制路径的细粒度<span style="color: red;">（正常页面展示时不需要加此参数）</span></p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/yMguNT"><img src="https://s3.ax1x.com/2021/02/03/yMguNT.png" alt="yMguNT.png"></a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">QRCode</span>(canvasId, &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">correctLevel</span>: <span class="title class_">QRCode</span>.<span class="property">CorrectLevel</span>.<span class="property">M</span>,</span><br><span class="line">  <span class="attr">typeNumber</span>: <span class="number">8</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="普通二维码跳转小程序"><a href="#普通二维码跳转小程序" class="headerlink" title="普通二维码跳转小程序"></a>普通二维码跳转小程序</h4><p>如果绘制的是普通二维码，需要通过映射二维码地址跳转小程序指定页面   </p>
<p>小程序后台-开发管理-开发设置-扫普通链接二维码打开小程序</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/yMgK4U"><img src="https://s3.ax1x.com/2021/02/03/yMgK4U.md.png" alt="yMgK4U.md.png"></a></p>
<p>需要注意的是二维码映射关系跳转跳转对应的小程序版本（开发、体验、线上版本），测试的地址如果携带参数则必须严格匹配</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/yMgl34"><img src="https://s3.ax1x.com/2021/02/03/yMgl34.md.png" alt="yMgl34.md.png"></a></p>
<p>此方案更多是为了解决线下二维码已经铺设二维码，兼容原先的二维码跳转小程序场景，并不是一个常用的二维码跳转方案。</p>
<p>官方有提供获取小程序码，常规的api每天有数量限制，可以使用如下api，若采用官方生成小程序码的方案，完全可以弃用普通二维码绘制、映射跳转一系列繁琐步骤，但此方案需要依赖后端帮助获取。</p>
<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/qr-code/wxacode.getUnlimited.html">官方不限制获取小程序码</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://megan-ta.github.io/2021/01/21/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%B8%A6%E4%BA%8C%E7%BB%B4%E7%A0%81%E5%88%86%E4%BA%AB%E5%9B%BE%E6%B3%A8%E6%84%8F%E7%82%B9/" data-id="clu6rtt9d003ba8xa088hbdi2" data-title="小程序带二维码分享图注意点" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/MyBlog/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-堆排序" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/MyBlog/2020/12/02/%E5%A0%86%E6%8E%92%E5%BA%8F/" class="article-date">
  <time class="dt-published" datetime="2020-12-02T03:06:43.000Z" itemprop="datePublished">2020-12-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/MyBlog/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/MyBlog/2020/12/02/%E5%A0%86%E6%8E%92%E5%BA%8F/">堆排序入门</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>  堆排序是指利用堆这种数据结构所设计的一种排序算法。<br>  利用最大堆实现升序, 最小堆实现降序。<br>  因为最大堆的根父节点一定是最大的, 让它和队尾元素互换, 然后在从堆中排除最后一个元素, 并复原最大堆，循环 n-1次。</p>
<h2 id="堆的特点"><a href="#堆的特点" class="headerlink" title="堆的特点"></a>堆的特点</h2><ul>
<li>堆是一个近似完全二叉树的结构；</li>
<li>堆分为 最大堆和最小堆；</li>
<li>最大堆父节点都大于子节点，最小堆父节点都小于子节点；</li>
<li>第i个元素的左子节点：2*i + 1  （i为父节点index）</li>
<li>第i个元素的右子节点：2*i + 2</li>
<li>第i个元素的父节点： (n - 1) &#x2F; 2</li>
<li>最后一个非叶子节点为 Math.floor(arr.length &#x2F; 2) - 1</li>
</ul>
<h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><h3 id="基本过程"><a href="#基本过程" class="headerlink" title="基本过程"></a>基本过程</h3><p>max_heapify 过程：其时间复杂度为O(lgn)</p>
<p>build_max_heap 过程：从无序数组构建最大堆。具有线性时间复杂度。</p>
<p>heap_sort 过程：堆排序过程。时间复杂度是O(nlgn)</p>
<p>堆排序的关键点在于如何构建最大堆</p>
<h3 id="堆排序原理"><a href="#堆排序原理" class="headerlink" title="堆排序原理"></a>堆排序原理</h3><p>1.首先，构建最大堆，此时堆的大小与数组大小相等，</p>
<p>2.然后，把堆顶元素（堆中最大的元素 a ）与堆尾元素交换，</p>
<p>3.此时 a 元素已经放到了正确的位置，</p>
<p>4.堆的大小减去1，</p>
<p>5.对堆顶的元素执行 max_heapify 过程，维持最大堆的性质。之后堆顶又是目前堆中的最大元素了。</p>
<p>6.从 步骤2 循环，直到堆中只剩下一个元素（该元素是数组中最小元素，且此时位于下标 0 的位置）</p>
<p>示意图如下：</p>
<p><img src="https://i.loli.net/2020/03/21/Mqn8abVcAim9GTu.png" alt="最大堆的构建过程"></p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arrs = [<span class="number">7</span>, <span class="number">1</span>, <span class="number">13</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">5</span>, <span class="number">8</span>]</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`原始序列：`</span>, arrs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newArrs = <span class="title function_">heapSort</span>(arrs)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`排序后：`</span>, arrs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">swap</span>(<span class="params">arr, i, j</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> temp = arr[i]</span><br><span class="line">    arr[i] = arr[j]</span><br><span class="line">    arr[j] = temp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 堆调整</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">maxHeapify</span>(<span class="params">arr, i, len</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">2</span> * i + <span class="number">1</span>,</span><br><span class="line">        right = <span class="number">2</span> * i + <span class="number">2</span>,</span><br><span class="line">        largest = i</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (left &lt; len &amp;&amp; arr[left] &gt; arr[largest]) largest = left</span><br><span class="line">    <span class="keyword">if</span> (right &lt; len &amp;&amp; arr[right] &gt; arr[largest]) largest = right</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 不等于初始值 说明左右节点有比原先父节点大的数值</span></span><br><span class="line">    <span class="keyword">if</span> (largest !== i) &#123;</span><br><span class="line">        <span class="title function_">swap</span>(arr, i, largest)</span><br><span class="line">        <span class="comment">// 原先的父节点位置和现在父节点交换位置后 在原先的节点位置处是否还是最大值 需要判断比较</span></span><br><span class="line">        <span class="title function_">maxHeapify</span>(arr, largest, len)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构建最大堆（大顶堆）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">buildMaxHeap</span>(<span class="params">arr = []</span>) &#123;</span><br><span class="line">    <span class="comment">// 初始化最大堆 从最后一个非叶子节点开始</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="title class_">Math</span>.<span class="title function_">floor</span>(arr.<span class="property">length</span> / <span class="number">2</span> - <span class="number">1</span>); i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="title function_">maxHeapify</span>(arr, i, arr.<span class="property">length</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 堆排序</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">heapSort</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!arr || arr.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;数组为null或者长度为0&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> newArr = []</span><br><span class="line"></span><br><span class="line">    <span class="title function_">buildMaxHeap</span>(arr)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 大顶堆的第一个元素与堆内最后一个元素交换位置 并将堆大小-1 循环n-1次</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = arr.<span class="property">length</span> - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">        newArr.<span class="title function_">push</span>(arr[<span class="number">0</span>])</span><br><span class="line">        <span class="title function_">swap</span>(arr, <span class="number">0</span>, i)</span><br><span class="line">        arr.<span class="property">length</span>--</span><br><span class="line">        <span class="title function_">maxHeapify</span>(arr, <span class="number">0</span>, arr.<span class="property">length</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> newArr</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h2><p>buildMaxHeap使用O(N)的时间，元素下滤需要O(logN)，需要下滤N-1次，所以总共需要O(N + (N - 1)logN) &#x3D; O(NlogN)。所以复杂度稳定在O(NlogN)。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://megan-ta.github.io/2020/12/02/%E5%A0%86%E6%8E%92%E5%BA%8F/" data-id="clu6rtt9c0037a8xa5rju2w95" data-title="堆排序入门" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/MyBlog/tags/algorithm/" rel="tag">algorithm</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-node内存监控" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/MyBlog/2020/11/12/node%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7/" class="article-date">
  <time class="dt-published" datetime="2020-11-12T10:52:17.000Z" itemprop="datePublished">2020-11-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/MyBlog/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/MyBlog/2020/11/12/node%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7/">node内存监控</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>我们都知道，当使用Node在生产环境作为服务器语言时，并发量过大或者因为代码问题很容易造成OOM或者CPU满载这些常见问题，此时通过监控CPU、内存，再结合日志和Release就能很容易发现问题。</p>
<p>那么如何知道本地Node服务平时占用内存多少？或者说是如何知道某个进程消耗多少内存？</p>
<p>示例测试代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Koa</span> = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Koa</span>()</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  ctx.<span class="property">data</span> = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">10000</span>).<span class="title function_">fill</span>(<span class="number">10000</span>).<span class="title function_">map</span>(<span class="function"><span class="params">x</span> =&gt;</span> <span class="number">10</span>)</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function"><span class="params">ctx</span> =&gt;</span> &#123;</span><br><span class="line">  ctx.<span class="property">body</span> = <span class="string">&#x27;hello, world&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">8080</span>, <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Port: 8080&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h2 id="如何找到进程的pid"><a href="#如何找到进程的pid" class="headerlink" title="如何找到进程的pid"></a>如何找到进程的pid</h2><ol>
<li>通过多余参数结合ps定位进程；</li>
<li>通过端口号结合lsof定位进程；</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ node index.js <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一种 ps+多余参数</span></span><br><span class="line">$ ps -ef | grep <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">  501 90194 83348   0  7:02下午 ttys003    0:00.08 node index.js <span class="built_in">test</span></span><br><span class="line">  501 90200 84062   0  7:02下午 ttys004    0:00.00 grep <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种 lsof+端口号定位</span></span><br><span class="line">$ node  lsof -i:8080 | grep node</span><br><span class="line"></span><br><span class="line">  node 90194 mac  22u  IPv6 0x49017005e24b683s      0t0  TCP *:http-alt (LISTEN)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="压力测试"><a href="#压力测试" class="headerlink" title="压力测试"></a>压力测试</h2><p>利用常用的ab进行测试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -c 客户端数量</span></span><br><span class="line"><span class="comment"># -n 请求量</span></span><br><span class="line">ab -c 200 -n 1600 http://127.0.0.1:8080/</span><br></pre></td></tr></table></figure>

<h2 id="pidstat监控内存变化"><a href="#pidstat监控内存变化" class="headerlink" title="pidstat监控内存变化"></a>pidstat监控内存变化</h2><p>pidstat 是 sysstat 系列 linux 性能调试工具的一个包，竟然用它来调试 linux 的性能问题，包括内存，网络，IO，CPU 等。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -r: 指输出内存指标</span></span><br><span class="line"><span class="comment"># -p: 指定 pid</span></span><br><span class="line"><span class="comment"># 1: 每一秒输出一次</span></span><br><span class="line"><span class="comment"># 100: 输出100次</span></span><br><span class="line"></span><br><span class="line">$ pidstat -r -p 90194 1 100</span><br><span class="line"></span><br><span class="line">               UID    PID   minflt/s  majflt/s     VSZ    RSS    %MEM  Command</span><br><span class="line">19时20分39秒     0     11401      0.00      0.00  566768  19800   0.12  node</span><br><span class="line">19时20分40秒     0     11401      0.00      0.00  566768  19800   0.12  node</span><br><span class="line">19时20分41秒     0     11401   9667.00      0.00  579024  37792   0.23  </span><br></pre></td></tr></table></figure>

<p>RSS：常驻内存集，可理解为内存，是我们需要监控的指标。</p>
<p>VSZ：虚拟内存</p>
<h2 id="top监控内存变化"><a href="#top监控内存变化" class="headerlink" title="top监控内存变化"></a>top监控内存变化</h2><p>mac上可以使用htop</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装</span></span><br><span class="line">brew install htop</span><br><span class="line"></span><br><span class="line">htop -p 90194</span><br></pre></td></tr></table></figure>

<p>常用命令：</p>
<ol>
<li>PID：进程标志号，是非零正整数</li>
<li>USER：进程所有者的用户名</li>
<li>PRI：进程的优先级别</li>
<li>NI：进程的优先级别数值</li>
<li>VIRT：进程占用的虚拟内存值</li>
<li>RES：进程占用的物理内存值，单位KB</li>
<li>SHR：进程使用的共享内存值</li>
<li>S：进程的状态，其中S代表休眠，R代表正在运行，Z表示僵死状态，N代表该进程优先级是负数</li>
<li>%CPU：该进程占用的cpu使用率</li>
<li>%MEM：该进程占用的物理内存和总内存的百分比</li>
<li>TIME+：该进程启动后占用的总的CPU时间</li>
<li>COMMAND：进程启动的启动命令名称</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/DS5c6J"><img src="https://s3.ax1x.com/2020/11/13/DS5c6J.png" alt="DS5c6J.png"></a></p>
<p>ab命令施加压力，会明显看到内存数据在暴涨</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/DS5zh8"><img src="https://s3.ax1x.com/2020/11/13/DS5zh8.png" alt="DS5zh8.png"></a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://megan-ta.github.io/2020/11/12/node%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7/" data-id="clu6rtt8u001ia8xa91z97l5j" data-title="node内存监控" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/MyBlog/tags/node/" rel="tag">node</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-动态规划入门" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/MyBlog/2020/08/27/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E5%85%A5%E9%97%A8/" class="article-date">
  <time class="dt-published" datetime="2020-08-27T03:18:54.000Z" itemprop="datePublished">2020-08-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/MyBlog/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/MyBlog/2020/08/27/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E5%85%A5%E9%97%A8/">动态规划入门</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>假设有数字1，5， 11，那么凑出数字n最少需要多少个数字？</p>
<p>函数f(n) 表明凑出n需要的数字个数</p>
<p>说明：</p>
<ul>
<li>假设最后一个数字是1, 那么凑出n-1最少需要多少个数字？  min &#x3D; f(n-1) + 1</li>
<li>假设最后一个数字是5, 那么凑出n-5最少需要多少个数字？  min &#x3D; f(n-5) + 1</li>
<li>假设最后一个数字是11, 那么凑出n-11最少需要多少个数字？ min &#x3D; f(n - 11) + 1</li>
</ul>
<p>所以最小需要的数字就是上述三种情况下的最小值 min{f(n - 1), f(n-5), f(n-11)}，再加上固定的最后一位1</p>
<p>公式：<br>f(n) &#x3D; min{f(n - 1), f(n-5), f(n-11)} + 1</p>
<p>代码实现：</p>
<h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  <span class="keyword">let</span> min = <span class="title class_">Infinity</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (n &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">    min = <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="title function_">f</span>(n - <span class="number">1</span>) + <span class="number">1</span>, min)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (n &gt;= <span class="number">5</span>) &#123;</span><br><span class="line">    min = <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="title function_">f</span>(n - <span class="number">5</span>) + <span class="number">1</span>, min)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (n &gt;= <span class="number">11</span>) &#123;</span><br><span class="line">    min = <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="title function_">f</span>(n - <span class="number">11</span>) + <span class="number">1</span>, min)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> min</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>(<span class="number">70</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 比如凑出数字15</span></span><br><span class="line"><span class="title function_">f</span>(<span class="number">15</span>) =&gt; <span class="number">3</span></span><br><span class="line"><span class="title function_">f</span>(<span class="number">14</span>) =&gt; <span class="number">4</span></span><br><span class="line"><span class="title function_">f</span>(<span class="number">12</span>) =&gt; <span class="number">2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="递归的弊端"><a href="#递归的弊端" class="headerlink" title="递归的弊端"></a>递归的弊端</h2><p>1、数字大的一定量的时候耗时越来越长；</p>
<p>2、数字过大时候会爆栈；</p>
<p>比如f(70)这情况</p>
<p><img src="https://user-gold-cdn.xitu.io/2020/4/3/1713e9f158144d68?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="递归"></p>
<p>计算f(70)分为三种情况，三种情况下的递归又依次分为三种情况，以此类推算法复杂度O(3^n)</p>
<p>其中上图红色部分代表重复计算的数字，一般原则就是利用空间换时间的原则，维护一份备忘录，备忘录中有对应值直接取，不用再次计算</p>
<p>处理问题1相关代码实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">amount</span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">start</span>(<span class="params">n</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> (cache[n]) <span class="keyword">return</span> cache[n]</span><br><span class="line">        <span class="keyword">let</span> min = <span class="title class_">Infinity</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (n &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">            min = <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="title function_">start</span>(n - <span class="number">1</span>) + <span class="number">1</span>, min)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (n &gt;= <span class="number">5</span>) &#123;</span><br><span class="line">            min = <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="title function_">start</span>(n - <span class="number">5</span>) + <span class="number">1</span>, min)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (n &gt;= <span class="number">11</span>) &#123;</span><br><span class="line">            min = <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="title function_">start</span>(n - <span class="number">11</span>) + <span class="number">1</span>, min)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        cache[n] = min</span><br><span class="line">        <span class="keyword">return</span> min</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> cache = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">start</span>(amount)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h2><p>上述递归的实现是<code>从上到下</code>的计算思路，即f(70)f(69)…f(1)逐步分解，这个思路这里并不完全适用，我们需要一种<code>从下到上</code>的计算思路，即f(1)f(2)…f(70)的方式来解决大规模问题，动态规划通常是用<code>迭代</code>取代递归来解决问题。</p>
<p>除此之外，递归+备忘录 的另一个缺陷就是再没有优化空间了，因为在最坏的情况下，递归的最大深度为O(n)，换成迭代之后根本不需要如此多的存储空间。</p>
<h2 id="动态转移方程"><a href="#动态转移方程" class="headerlink" title="动态转移方程"></a>动态转移方程</h2><p>分析上述备忘录缓存的节点形式如下</p>
<table>
<thead>
<tr>
<th>amount</th>
<th>n</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
</tr>
<tr>
<td>6</td>
<td>2</td>
</tr>
<tr>
<td>7</td>
<td>3</td>
</tr>
<tr>
<td>8</td>
<td>4</td>
</tr>
<tr>
<td>9</td>
<td>5</td>
</tr>
<tr>
<td>10</td>
<td>2</td>
</tr>
<tr>
<td>11</td>
<td>1</td>
</tr>
<tr>
<td>12</td>
<td>2</td>
</tr>
<tr>
<td>13</td>
<td>3</td>
</tr>
</tbody></table>
<p>f[1] &#x3D; min(f[0], f[-5], f[-11]) + 1 &#x3D; 1<br>f[5] &#x3D; min(f[0], f[4], f[-6]) + 1 &#x3D; 1</p>
<p>得出公式为：</p>
<blockquote>
<p>f[n] &#x3D; min(f[n - 1], f[n- 5], f[n - 11]) + 1</p>
</blockquote>
<p>代码实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">makeChange</span>(<span class="params">coins = [], amount = <span class="number">0</span></span>) &#123;</span><br><span class="line">  <span class="comment">// 初始化备忘录 Infinity填充 位数根据传入的数值动态决定位数 第0位默认0占位</span></span><br><span class="line">  <span class="keyword">const</span> dp = <span class="keyword">new</span> <span class="title class_">Array</span>(amount + <span class="number">1</span>).<span class="title function_">fill</span>(<span class="title class_">Infinity</span>)</span><br><span class="line"></span><br><span class="line">  dp[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= amount; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> coin <span class="keyword">of</span> coins) &#123;</span><br><span class="line">      <span class="keyword">if</span> (coin &lt; i) &#123;</span><br><span class="line">        dp[i] = <span class="title class_">Math</span>.<span class="title function_">min</span>(dp[i - coin] + <span class="number">1</span>, dp[i])</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// dp[amount] === Infinity 说明没有最优解返回-1</span></span><br><span class="line">  <span class="keyword">return</span> dp[amount] === <span class="title class_">Infinity</span> ? -<span class="number">1</span> : dp[amount]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://megan-ta.github.io/2020/08/27/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E5%85%A5%E9%97%A8/" data-id="clu6rtt9a0031a8xagp93fres" data-title="动态规划入门" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/MyBlog/tags/javascript/" rel="tag">javascript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-windows下安装node-gyp失败" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/MyBlog/2020/07/31/windows%E4%B8%8B%E5%AE%89%E8%A3%85node-gyp%E5%A4%B1%E8%B4%A5/" class="article-date">
  <time class="dt-published" datetime="2020-07-31T07:40:58.000Z" itemprop="datePublished">2020-07-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/MyBlog/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/MyBlog/2020/07/31/windows%E4%B8%8B%E5%AE%89%E8%A3%85node-gyp%E5%A4%B1%E8%B4%A5/">windows下安装node-gyp失败</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>用作为当前目录的以上路径启动了 CMD.EXE。UNC 路径不受支持。默认值设为 Windows 目录。</li>
</ul>
<p>处理：</p>
<p>cmd下运行如下命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reg add &quot;HKEY_CURRENT_USER\Software\Microsoft\Command Processor&quot; /v &quot;DisableUNCCheck&quot; /t &quot;REG_DWORD&quot; /d &quot;1&quot; /f</span><br></pre></td></tr></table></figure>

<ul>
<li>Could not find any Visual Studio installation to use</li>
</ul>
<p>处理：</p>
<p>下载<code>windows-build-tools</code></p>
<p>管理员权限打开<code>powershell</code>，输入如下命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --global --production windows-build-tools</span><br></pre></td></tr></table></figure>

<p>安装完毕，使用如下方式安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --msvs_version=2013</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>若报错，检查报错提示，一般表示vscode版本不对</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">gyp ERR! find VS msvs_version was set from command line or npm config</span><br><span class="line">gyp ERR! find VS - looking for Visual Studio version 2013</span><br><span class="line">gyp ERR! find VS VCINSTALLDIR not set, not running in VS Command Prompt</span><br><span class="line">gyp ERR! find VS checking VS2017 (15.9.28307.1216) found at:</span><br><span class="line">gyp ERR! find VS &quot;C:\Program Files\Microsoft Visual Studio\2017\BuildTools&quot;</span><br><span class="line">gyp ERR! find VS - found &quot;Visual Studio C++ core features&quot;</span><br><span class="line">gyp ERR! find VS - found VC++ toolset: v141</span><br><span class="line">gyp ERR! find VS - found Windows SDK: 10.0.17763.0</span><br><span class="line">gyp ERR! find VS - msvs_version does not match this version</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>提示<code>VS2017</code>版本存在，换用2017</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --msvs_version=2017</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>下载成功</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://megan-ta.github.io/2020/07/31/windows%E4%B8%8B%E5%AE%89%E8%A3%85node-gyp%E5%A4%B1%E8%B4%A5/" data-id="clu6rtt8z0025a8xa5jlt8gty" data-title="windows下安装node-gyp失败" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/MyBlog/tags/npm/" rel="tag">npm</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-性能上报" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/MyBlog/2020/06/15/%E6%80%A7%E8%83%BD%E4%B8%8A%E6%8A%A5/" class="article-date">
  <time class="dt-published" datetime="2020-06-15T09:35:41.000Z" itemprop="datePublished">2020-06-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/MyBlog/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/MyBlog/2020/06/15/%E6%80%A7%E8%83%BD%E4%B8%8A%E6%8A%A5/">性能上报</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>性能计算逻辑，全部取自<code>window.performance.timing</code></p>
<p><img src="https://picb.zhimg.com/80/v2-e4e26420d6b681b2b15b9edf9db9d4d0_720w.jpg" alt="指标解读"></p>
<h2 id="关键指标"><a href="#关键指标" class="headerlink" title="关键指标"></a>关键指标</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 上一个页面卸载</span></span><br><span class="line">unloadEventEnd - unloadEventStart <span class="keyword">as</span> prevUnload,</span><br><span class="line"><span class="comment">// 重定向</span></span><br><span class="line">redirectEnd - redirectStart <span class="keyword">as</span> redirect,</span><br><span class="line"><span class="comment">// DNS缓存时间</span></span><br><span class="line">domainLookupStart - fetchStart <span class="keyword">as</span> appCache,</span><br><span class="line"><span class="comment">// DNS解析耗时</span></span><br><span class="line">domain_lookup_end - domainLookupStart <span class="keyword">as</span> dns,</span><br><span class="line"><span class="comment">// SSL</span></span><br><span class="line">connectEnd - secureConnectionStart <span class="keyword">as</span> ssl,</span><br><span class="line"><span class="comment">// TCP链接耗时</span></span><br><span class="line">connectEnd - connectStart <span class="keyword">as</span> tcp,</span><br><span class="line"><span class="comment">// ttfb 页面第一个字节的时间</span></span><br><span class="line">responseStart - responseStart <span class="keyword">as</span> ttfb,</span><br><span class="line"><span class="comment">// request耗时</span></span><br><span class="line">responseEnd - responseStart <span class="keyword">as</span> htmlRequest,</span><br><span class="line"><span class="comment">// domLoading - fetchStart as fp,</span></span><br><span class="line"><span class="comment">// dom树解析完成 / 白屏时间  </span></span><br><span class="line">domInteractive - fetchStart <span class="keyword">as</span> domIteractive,</span><br><span class="line"><span class="comment">// domReady / TTI 可交互时间</span></span><br><span class="line">domContentLoadEventEnd - fetchStart <span class="keyword">as</span> domReady,</span><br><span class="line"><span class="comment">// dom解析耗时</span></span><br><span class="line">domComplete -  domLoading <span class="keyword">as</span> domProcess,</span><br><span class="line"><span class="comment">// 资源加载耗时</span></span><br><span class="line">domComplete - domContentLoadEventStart  <span class="keyword">as</span> resourceLoad,</span><br><span class="line"><span class="comment">// load事件耗时</span></span><br><span class="line">loadEventEnd - loadEventStart <span class="keyword">as</span> loadEvent,</span><br><span class="line"><span class="comment">// 页面完全加载耗时</span></span><br><span class="line">loadEventEnd - fetchStart <span class="keyword">as</span> pageComplete</span><br></pre></td></tr></table></figure>

<h2 id="首屏时间"><a href="#首屏时间" class="headerlink" title="首屏时间"></a>首屏时间</h2><p>首屏时间是指页面第一屏所有资源完整展示的时间。这是一个对用户来说非常直接的体验指标，但是对于前端却是一个非常难以统计衡量的指标。</p>
<p>目前统计首屏时间有如下几种方式：</p>
<ol>
<li>用户自定义打点（最准确方式，只有用户自己最清楚什么时候算是首屏加载完成）;</li>
<li>lighthouse 中使用的是 chrome 渲染过程中记录的 trace event;</li>
<li>aegis 的方法：利用 MutationObserver 接口，监听 document 对象的节点变化。</li>
</ol>
<p>检查这些变化的节点是否在首屏中，若这些节点在首屏中，那当前的时间点就是首屏渲染时间。如果首屏有图片，则通过遍历 performance.getEntries拿到的所有在首屏的图片实体对象，统计最慢的图片加载时间来更新首屏渲染时间；</p>
<ol start="4">
<li>利用 MutationObserver；</li>
</ol>
<p>在首屏内容模块插入一个 div，利用 Mutation Observer API 监听该 div 的 dom 事件，判断该 div 的高度是否大于 0 或者大于指定值，如果大于了，就表示主要内容已经渲染出来，可计算首屏时间。</p>
<h2 id="数据上报方式"><a href="#数据上报方式" class="headerlink" title="数据上报方式"></a>数据上报方式</h2><p>测量好数据之后，需要将数据发给服务端。考虑到页面性能统计对数据的丢失率要求不高，且数据上报应该尽量不影响主流程的逻辑和页面的性能情况下进行。</p>
<h3 id="img标签上报"><a href="#img标签上报" class="headerlink" title="img标签上报"></a>img标签上报</h3><p>标签上报是最通用，最常用的上报方式，其中具备两个主要特点：</p>
<ol>
<li>没有任何兼容性；</li>
<li>不存在跨域问题；</li>
</ol>
<h3 id="navigator-sendBeacon"><a href="#navigator-sendBeacon" class="headerlink" title="navigator.sendBeacon"></a>navigator.sendBeacon</h3><p>大部分现代浏览器都支持 navigator.sendBeacon方法。这个方法可以用来发送一些统计和诊断的小量数据，特别适合上报统计的场景。</p>
<ol>
<li>数据可靠，浏览器关闭也能发送；</li>
<li>异步执行，不会影响下一页面加载即；</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;unload&#x27;</span>, logData, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    navigator.<span class="title function_">sendBeacon</span>(<span class="string">&quot;/log&quot;</span>, analyticsData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a target="_blank" rel="noopener" href="http://www.alloyteam.com/2020/01/14184/#prettyPhoto">如何进行web性能监控</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://megan-ta.github.io/2020/06/15/%E6%80%A7%E8%83%BD%E4%B8%8A%E6%8A%A5/" data-id="clu6rtt9f003oa8xa3gga45d8" data-title="性能上报" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/MyBlog/tags/javascript/" rel="tag">javascript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-动态换肤" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/MyBlog/2020/06/12/%E5%8A%A8%E6%80%81%E6%8D%A2%E8%82%A4/" class="article-date">
  <time class="dt-published" datetime="2020-06-12T10:19:58.000Z" itemprop="datePublished">2020-06-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/MyBlog/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/MyBlog/2020/06/12/%E5%8A%A8%E6%80%81%E6%8D%A2%E8%82%A4/">动态换肤</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>说起前端换肤，一般分为两种：</p>
<ol>
<li>一种是几种可供选择的颜色&#x2F;主题样式，进行选择切换，这种可供选择的主题切换不会很多，适合绝大多数项目实际情况；</li>
<li>另一种是需要自定义色值，或者通过取色板取色，可供选择的范围就很大了，参考Element-ui主题色定义；</li>
</ol>
<p>我们具体讲一讲第一种情况，这也是适合绝大多数项目实际情况，比较有代表性。第二种实现可以参考Element-ui实现思路</p>
<h2 id="如何实现"><a href="#如何实现" class="headerlink" title="如何实现"></a>如何实现</h2><p>一般是通过控制给全局加一个样式，通过这个顶级样式去覆盖具体类的颜色；</p>
<p>这种方式使用和维护起来就很麻烦，并且很容易遗漏样式覆盖，并不是很推荐。</p>
<p>通过js控制改变加载不同主题色的link文件</p>
<p>这种实现对于，颜色和主题多了的时候，维护起来就很麻烦，需要同时维护 n 个样式文件，并且使用JS改变href属性会带来加载延迟，样式切换不流畅，体验也不好。</p>
<p>目前在不考虑兼容IE低版本的情况下，比较推荐的通用方案是使用CSS变量</p>
<p><img src="https://s1.ax1x.com/2020/06/12/tXFaxH.png" alt="CSS Variables"></p>
<p><a target="_blank" rel="noopener" href="https://caniuse.com/#search=CSS%20Variables">点这里查看更详细兼容性</a></p>
<p>可见目前主流移动端浏览器支持率还是不错的，而且操作起来够简便。</p>
<p>用法举例</p>
<p>定义全局变量</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attr">--color-ff</span>: red;</span><br><span class="line">    <span class="attr">--color-f7</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 第二个参数可以设置默认颜色</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.color_test</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--color-ff, <span class="number">#fff</span>);</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--color-f7, blue);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>可以通过js修改</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&#x27;--color-ff&#x27;</span>, <span class="string">&#x27;#ff0000&#x27;</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&#x27;--color-f7&#x27;</span>, <span class="string">&#x27;#ff0000&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>可以将换肤样式定义在html头部 或 写在css文件内再去引用</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span><span class="selector-class">.dark</span> &#123;</span><br><span class="line">    <span class="attr">--color-ff</span>: <span class="number">#ff0000</span>;</span><br><span class="line">    <span class="attr">--color-f7</span>: <span class="number">#ff0000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>监听系统样式变化，动态加入换肤样式（.dark）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> darkMode = <span class="variable language_">window</span>.<span class="property">matchMedia</span> &amp;&amp; <span class="variable language_">window</span>.<span class="title function_">matchMedia</span>(<span class="string">&#x27;(prefers-color-scheme: dark)&#x27;</span>);</span><br><span class="line">      <span class="comment">// 判断是否匹配深色模式</span></span><br><span class="line">      <span class="keyword">if</span> (darkMode &amp;&amp; darkMode.<span class="property">matches</span>) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;dark&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 监听主题切换事件</span></span><br><span class="line">      darkMode &amp;&amp; darkMode.<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (e.<span class="property">matches</span>) &#123;</span><br><span class="line">          <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;dark&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;dark&#x27;</span>);  </span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5ab835225188255572085af4">关于 CSS 变量，你需要了解的一切</a></li>
<li><a target="_blank" rel="noopener" href="https://codepen.io/ohansemmanuel/pen/xYKgwE">CODE PEN全局背景色替换</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://megan-ta.github.io/2020/06/12/%E5%8A%A8%E6%80%81%E6%8D%A2%E8%82%A4/" data-id="clu6rtt99002xa8xa9p3qafnp" data-title="动态换肤" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/MyBlog/tags/javascript/" rel="tag">javascript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-vscode使用" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/MyBlog/2020/05/11/vscode%E4%BD%BF%E7%94%A8/" class="article-date">
  <time class="dt-published" datetime="2020-05-11T05:57:25.000Z" itemprop="datePublished">2020-05-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/MyBlog/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/MyBlog/2020/05/11/vscode%E4%BD%BF%E7%94%A8/">vscode使用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="常用设置配置"><a href="#常用设置配置" class="headerlink" title="常用设置配置"></a>常用设置配置</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;workbench.iconTheme&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vscode-icons&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.fontSize&quot;</span><span class="punctuation">:</span> <span class="number">14</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.accessibilityPageSize&quot;</span><span class="punctuation">:</span> <span class="number">14</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.formatOnSave&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.tabSize&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.codeActionsOnSave&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;source.fixAll&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;window.zoomLevel&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fileheader.Author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;knight&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fileheader.LastModifiedBy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;knight&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fileheader.tpl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/*\r\n * @Author: &#123;author&#125; \r\n * @Title:  \r\n * @Date: &#123;createTime&#125; \r\n * @Last Modified by:   &#123;lastModifiedBy&#125; \r\n * @Last Modified time: &#123;updateTime&#125; \r\n */\r\n&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;git.autofetch&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;merge-conflict.diffViewPosition&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Beside&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;[vue]&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span><span class="punctuation">:</span> <span class="string">&quot;octref.vetur&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;eslint.alwaysShowStatus&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;eslint.validate&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;javascript&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;javascriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;language&quot;</span><span class="punctuation">:</span> <span class="string">&quot;html&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;autoFix&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;language&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;autoFix&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;eslint.format.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.defaultFormatter.html&quot;</span><span class="punctuation">:</span> <span class="string">&quot;js-beautify-html&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.defaultFormatterOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;js-beautify-html&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;wrap_attributes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;force-aligned&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.defaultFormatter.ts&quot;</span><span class="punctuation">:</span> <span class="string">&quot;prettier&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.options.tabSize&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;javascript.preferences.quoteStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;single&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;typescript.preferences.quoteStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;single&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pretty-formatter.quoteConvert&quot;</span><span class="punctuation">:</span> <span class="string">&quot;single&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.defaultFormatter.js&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vscode-typescript&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;path-intellisense.absolutePathToWorkspace&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;path-intellisense.mappings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;/src&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@public&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;/src/_public&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="常用包"><a href="#常用包" class="headerlink" title="常用包"></a>常用包</h2><ol>
<li>Visual Studio IntelliCode 智能补全</li>
<li>prettier 快速格式化 CMD+Shift+P</li>
<li>Regex Previewer 正则表达式测试</li>
<li>stylelint</li>
<li>vetur # 开发 vue，语法补全、提示助手 （必备插件）</li>
<li>vscode-icons # vscode 图标显示</li>
<li>小程序助手</li>
<li>vscode-element-helper</li>
<li>SVG Viewer # 预览 SVG</li>
<li>Path Intellisense 路径自动补全</li>
<li>minapp # 小程序开发语法补全、提示助手</li>
<li>markdownlint markdown 语法支持和预览</li>
<li>Live Server</li>
<li>koroFileHeader # 函数注释、文件信息</li>
<li>GitLens # git 辅助工具</li>
<li>javascript code snippets # js 代码提示、补全</li>
<li>Eslint # 代码风格提示</li>
<li>Element UI Snippets</li>
<li>EditorConfig for vs code</li>
<li>Document This</li>
<li>Debugger for Chrome</li>
<li>Color HighLight</li>
<li>CodeIf</li>
<li>Code Runner</li>
<li>Chinese Lanfguage Pack for vs code</li>
<li>Bracket Pair Colorizer 括号以多彩颜色区分</li>
<li>Beautify # 美化代码</li>
<li>Auto Rename Tag # 自动重命名标签</li>
<li>Auto Close Tag # 自动闭合标签</li>
<li>Better Comments</li>
<li>DotENV</li>
<li>Git Graph git可视化工具</li>
<li>Git History Diff</li>
<li>git-commit-lint-vscode commit加上emoji</li>
<li>Import Cost 显示导入模块大小</li>
<li>Open file From Path 直接跳转到指定代码</li>
<li>VS Color Picker 取色工具</li>
<li>vscode-fileheader</li>
<li>image preview 侧边栏图片预览</li>
</ol>
<h2 id="项目配置项"><a href="#项目配置项" class="headerlink" title="项目配置项"></a>项目配置项</h2><p>给vscode文件目录设置别名，并在引入时有对应提示，需要在根目录下新增<code>jsconfig.json</code>的文件，类似<code>tsconfig.json</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ES6&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;commonjs&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;allowSyntheticDefaultImports&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;@public/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/_public/*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;node_modules&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="launch-json-调试配置说明"><a href="#launch-json-调试配置说明" class="headerlink" title="launch.json 调试配置说明"></a>launch.json 调试配置说明</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;调试 Node.js 程序&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;/src/index.js&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>type 指定调试的语言</li>
<li>request 有两种类型，launch | attach，前者是 vscode 打开这个程序进入调试，后者是外部打开这个程序，然后接通 Node.js 的内部调试协议来调试</li>
<li>program 程序启动入口</li>
<li>console 配置终端是使用外部还是内部的集成终端</li>
</ul>
<p>如果不用 program 启动，还有其他方式启动</p>
<ul>
<li>runtimeExecutable 使用什么命令启动，此处是 node，也可以任意启动脚本命令 pm2 等其他第三方的命令（可能要 ${workspaceFolder}相对路径）</li>
<li>args 启动程序的参数</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;调试 Node.js 程序 - args&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;runtimeExecutable&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;$&#123;workspaceFolder&#125;/src/index.js&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>如果有其他编译前的准备，比如调试 TS 程序，依赖 typescript 和 ts-node 等命令</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;调试 TS Node 程序 - args&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;runtimeExecutable&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;runtimeArgs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;-r&quot;</span><span class="punctuation">,</span> <span class="string">&quot;ts-node/register&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;$&#123;workspaceFolder&#125;/src/index.ts&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>runtimeArgs 这个参数是为 runtimeExecutable 环境提供的配置，args 是为程序提供的配置，翻译为：通过 node 启动&#x2F;src&#x2F;index.ts，在启动时为 node 注入 ts-noe&#x2F;register 模块，以便可以执行 ts 类型的文件，实际执行代码如下</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node --inspect-brk=DEBUG_PORT -r ts-node/register ./src/index.ts</span><br></pre></td></tr></table></figure>

<p>当然上述启动调试还有其他方式</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;调试 TS Node 程序 - preTask&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;/out/index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;preLaunchTask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsc_build&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>preLaunchTask 在 launch 调试之前先执行一个任务，这个就设计到.vscode&#x2F;task.json 文件中配置的名为 tsc_build 的任务了</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsc_build&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typescript&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tsconfig&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsconfig.json&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>如果需要调试已启动的 Node.js 程序，比如先在外部使用 node .&#x2F;src&#x2F;index.js 命令启动程序后，此时如果我们想给这个程序断点调试，可以加入如下配置</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Attach to node&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;attach&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;processId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;command:PickProcess&#125;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>推荐使用 ${command:PickProcess} 作为 processId 的值，因为 VSCode 会遍历所有的 Node PID 列出来让你选择，当然如果你写死 processId 也可以这会直接跳过选择步骤</p>
<p>vscode 也能直接调试网页的 js 代码，安装 Debugger for Chrome 插件</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;调试网页的 JS 文件&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chrome&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;file&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;/index.html&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/6844904198702645262">VSCode launch.json 配置详解</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://megan-ta.github.io/2020/05/11/vscode%E4%BD%BF%E7%94%A8/" data-id="clu6rtt8y0021a8xa1qxge2hn" data-title="vscode使用" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/MyBlog/tags/IDE/" rel="tag">IDE</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/MyBlog/page/2/">2</a><a class="page-number" href="/MyBlog/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/MyBlog/page/5/">5</a><a class="extend next" rel="next" href="/MyBlog/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/MyBlog/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/MyBlog/categories/%E5%89%8D%E7%AB%AF/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/MyBlog/categories/%E8%BF%90%E7%BB%B4/">运维</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/CI-CD/" rel="tag">CI&#x2F;CD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/IDE/" rel="tag">IDE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/algorithm/" rel="tag">algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/crawler/" rel="tag">crawler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/httpa/" rel="tag">httpa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/interview/" rel="tag">interview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/jenkins/" rel="tag">jenkins</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/node/" rel="tag">node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/react/" rel="tag">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/sentry/" rel="tag">sentry</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/typescript/" rel="tag">typescript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/MyBlog/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/MyBlog/tags/CI-CD/" style="font-size: 10px;">CI/CD</a> <a href="/MyBlog/tags/IDE/" style="font-size: 10px;">IDE</a> <a href="/MyBlog/tags/algorithm/" style="font-size: 15px;">algorithm</a> <a href="/MyBlog/tags/crawler/" style="font-size: 12.5px;">crawler</a> <a href="/MyBlog/tags/css/" style="font-size: 10px;">css</a> <a href="/MyBlog/tags/docker/" style="font-size: 10px;">docker</a> <a href="/MyBlog/tags/git/" style="font-size: 12.5px;">git</a> <a href="/MyBlog/tags/httpa/" style="font-size: 10px;">httpa</a> <a href="/MyBlog/tags/interview/" style="font-size: 12.5px;">interview</a> <a href="/MyBlog/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/MyBlog/tags/jenkins/" style="font-size: 10px;">jenkins</a> <a href="/MyBlog/tags/linux/" style="font-size: 17.5px;">linux</a> <a href="/MyBlog/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/MyBlog/tags/node/" style="font-size: 17.5px;">node</a> <a href="/MyBlog/tags/npm/" style="font-size: 17.5px;">npm</a> <a href="/MyBlog/tags/react/" style="font-size: 12.5px;">react</a> <a href="/MyBlog/tags/sentry/" style="font-size: 12.5px;">sentry</a> <a href="/MyBlog/tags/typescript/" style="font-size: 10px;">typescript</a> <a href="/MyBlog/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 10px;">小程序</a> <a href="/MyBlog/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 10px;">随笔</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2024/03/">March 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2024/02/">February 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/MyBlog/archives/2018/07/">July 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/MyBlog/2024/03/25/centos%E4%B8%8B%E9%80%9A%E8%BF%87docker%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3%E5%85%B1%E4%BA%AB%E5%B9%B3%E5%8F%B0mm-wiki/">centos下通过docker安装文档共享平台mm-wiki</a>
          </li>
        
          <li>
            <a href="/MyBlog/2024/02/21/gitlab-runner%E6%90%AD%E5%BB%BACICD%E5%B9%B3%E5%8F%B0/">gitlab-runner搭建CI/CD平台</a>
          </li>
        
          <li>
            <a href="/MyBlog/2021/01/21/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%B8%A6%E4%BA%8C%E7%BB%B4%E7%A0%81%E5%88%86%E4%BA%AB%E5%9B%BE%E6%B3%A8%E6%84%8F%E7%82%B9/">小程序带二维码分享图注意点</a>
          </li>
        
          <li>
            <a href="/MyBlog/2020/12/02/%E5%A0%86%E6%8E%92%E5%BA%8F/">堆排序入门</a>
          </li>
        
          <li>
            <a href="/MyBlog/2020/11/12/node%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7/">node内存监控</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 huangchen<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/MyBlog/" class="mobile-nav-link">Home</a>
  
    <a href="/MyBlog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/MyBlog/js/jquery-3.6.4.min.js"></script>



  
<script src="/MyBlog/fancybox/jquery.fancybox.min.js"></script>




<script src="/MyBlog/js/script.js"></script>





  </div>
</body>
</html>